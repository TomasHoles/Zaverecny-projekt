Table users [headercolor: #175e7a] {
	id integer [ pk, increment, unique ]
	username varchar(30) [ not null ]
	email varchar(254)
	password varchar(128) [ not null ]
	first_name varchar(30)
	last_name varchar(30)
	avatar varchar(100)
	currency_preference varchar(3) [ default: USD ]
	is_active boolean [ default: true ]
	is_verified boolean [ default: true ]
	is_staff boolean [ default: false ]
	is_superuser boolean [ default: false ]
	date_joined timestamp [ not null, default: `now()` ]
	last_login timestamp
}

Table categories [headercolor: #175e7a] {
	id integer [ pk, increment, unique ]
	name varchar(100) [ not null ]
	description text
	icon varchar(50)
	color varchar(7) [ default: #000000 ]
	user_id integer [ not null ]
	created_at timestamp [ not null, default: `now()` ]
	updated_at timestamp [ not null, default: `now()` ]
}

Table transactions [headercolor: #175e7a] {
	id integer [ pk, increment, unique ]
	amount decimal(10,2) [ not null ]
	type varchar(10) [ not null ]
	category_id integer
	user_id integer [ not null ]
	date date [ not null ]
	description text
	created_at timestamp [ not null, default: `now()` ]
	updated_at timestamp [ not null, default: `now()` ]
}

Table budgets [headercolor: #175e7a] {
	id integer [ pk, increment, unique ]
	name varchar(100) [ not null ]
	amount decimal(10,2) [ not null ]
	start_date date [ not null ]
	end_date date [ not null ]
	period varchar(10) [ not null ]
	user_id integer [ not null ]
	created_at timestamp [ not null, default: `now()` ]
	updated_at timestamp [ not null, default: `now()` ]
}

Table budget_categories [headercolor: #175e7a] {
	id integer [ pk, increment, unique ]
	budget_id integer [ not null ]
	category_id integer [ not null ]
	allocated_amount decimal(10,2) [ not null ]
}

Table authtoken_token [headercolor: #175e7a] {
	key varchar(40) [ pk, unique ]
	created timestamp [ not null, default: `now()` ]
	user_id integer [ not null ]
}

Ref fk_categories_user_id_users {
	categories.user_id > users.id [ delete: no action, update: no action ]
}

Ref fk_transactions_user_id_users {
	transactions.user_id > users.id [ delete: no action, update: no action ]
}

Ref fk_transactions_category_id_categories {
	transactions.category_id > categories.id [ delete: no action, update: no action ]
}

Ref fk_budgets_user_id_users {
	budgets.user_id > users.id [ delete: no action, update: no action ]
}

Ref fk_budget_categories_budget_id_budgets {
	budget_categories.budget_id > budgets.id [ delete: no action, update: no action ]
}

Ref fk_budget_categories_category_id_categories {
	budget_categories.category_id > categories.id [ delete: no action, update: no action ]
}

Ref fk_authtoken_token_user_id_users {
	authtoken_token.user_id > users.id [ delete: no action, update: no action ]
}